name: CI

# Controls when the workflow will run.
on:
  # When creating a new pull request to the 'develop' branch.
  pull_request:
    branches: [ develop ]
    paths-ignore: [ '**.md' ]

  # Allows you to run this workflow manually from the Actions tab.
  workflow_dispatch:
    inputs:
      scenarioTag:
        description: 'Scenario Tag to execute(e.g. "@TC-00001")'
        type: string
        required: false
        default: '@Regression'

# A workflow run is made up of one or more jobs that can run sequentially or in parallel.
jobs:

  execution:
    # The type of runner that the job will run on.
    runs-on: ubuntu-latest

    steps:
#      - id: get-id
#        run: echo "branch_ref=$(echo ${{ github.head_ref }} | cut -f2 -d"/")" >> $GITHUB_OUTPUT
#      - run: |
#          if [[ ${{ steps.get-id.outputs.branch_ref }} = Im* ]]; then
#              echo "secrets=${{ steps.get-id.outputs.branch_ref }}" >> $GITHUB_OUTPUT
#          else
#              echo "secrets=Empty" >> $GITHUB_OUTPUT
#          fi
#      - run: |
#          echo "${{ steps.get-id.outputs.secrets }}"

      - name: Get id
        id: get-id
        env:
          BRANCH: ${{ github.head_ref }}
        run: |
              idTag=${BRANCH##*/}
              if [[ $idTag = Im* ]]; then
               echo "tag=$idTag" >> $GITHUB_OUTPUT
              else
               echo "tag=Empty" >> $GITHUB_OUTPUT
              fi
      - run: |
          echo "Test Outputs"
          echo "${{ steps.get-id.outputs.tag }}"
